# TDD (Test-Driven Development) 규칙

## 개요
이 프로젝트의 **코어 로직(UI 제외)**은 TDD(Test-Driven Development) 방식으로 구현합니다.

---

## TDD 사이클

모든 코어 로직 개발은 다음 Red-Green-Refactor 사이클을 따릅니다:

```
1. 🔴 Red: 실패하는 테스트 작성
   ↓
2. 🟢 Green: 테스트를 통과하는 최소한의 코드 작성
   ↓
3. 🔵 Refactor: 코드 개선 (테스트는 계속 통과)
   ↓
   (반복)
```

---

## 적용 범위

### ✅ TDD 필수 적용 영역

다음 모듈들은 **반드시** TDD로 구현합니다:

1. **계산 로직** (`calculator.js`)
   - 사칙연산 (+, -, ×, ÷)
   - 공학용 함수 (sin, cos, tan, log, ln, sqrt, power, factorial 등)
   - 각도 단위 변환 (DEG ↔ RAD ↔ GRAD)
   - 에러 처리 및 검증

2. **상태 관리** (`storage.js`)
   - 히스토리 저장/불러오기
   - 설정 저장/불러오기
   - 로컬 스토리지 관리

3. **유틸리티 함수** (`utils.js`)
   - 숫자 포맷팅 (천 단위 콤마)
   - 입력 검증
   - 데이터 변환

### ❌ TDD 제외 영역

다음 영역은 TDD를 적용하지 않습니다:

1. **UI 컴포넌트** (`ui.js`, `display.js`, `keypad.js`, `header.js`, `history.js`)
   - DOM 조작
   - 애니메이션
   - 이벤트 리스너

2. **메인 앱** (`main.js`)
   - 앱 초기화
   - 이벤트 바인딩

---

## TDD 작업 흐름

### 1. 테스트 먼저 작성

새로운 기능을 구현하기 전에 **항상 테스트를 먼저 작성**합니다.

```javascript
// ❌ 잘못된 방식: 코드 먼저 작성
function add(a, b) {
  return a + b;
}

// ✅ 올바른 방식: 테스트 먼저 작성
describe('Calculator', () => {
  it('should add two numbers correctly', () => {
    const calc = new Calculator();
    expect(calc.add(2, 3)).toBe(5);
  });
});

// 그 다음 구현
class Calculator {
  add(a, b) {
    return a + b;
  }
}
```

### 2. 최소한의 코드로 테스트 통과

테스트를 통과하는 **가장 간단한 코드**를 작성합니다.

### 3. 리팩토링

테스트가 통과하면 코드를 개선합니다. **테스트는 계속 통과해야 합니다.**

---

## 테스트 커버리지 목표

| 영역 | 목표 커버리지 |
|------|---------------|
| 계산 로직 | **95%+** |
| 상태 관리 | **90%+** |
| 유틸리티 | **90%+** |
| **전체 코어 로직** | **90%+** |

---

## TDD 체크리스트

새로운 기능을 추가할 때 다음을 확인하세요:

- [ ] 테스트를 먼저 작성했는가?
- [ ] 테스트가 실패하는 것을 확인했는가? (Red)
- [ ] 최소한의 코드로 테스트를 통과시켰는가? (Green)
- [ ] 코드를 리팩토링했는가? (Refactor)
- [ ] 모든 테스트가 여전히 통과하는가?
- [ ] 커버리지 목표를 달성했는가?

---

**규칙 버전**: 1.0  
**최종 수정일**: 2025-12-23
